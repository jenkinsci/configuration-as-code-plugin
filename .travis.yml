language: java

dist: xenial

services:
  - docker

before_cache:
  - rm -rf $HOME/.m2/repository/io/jenkins/configuration-as-code*

cache:
  directories:
    - $HOME/.m2

env:
  global:
    - JAVA_LEVEL=8

install:
  - mvn clean install -DskipTests=true -Dmaven.javadoc.skip=true -B -V $MVN_FLAG -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn

script:
  - |
    mvn clean install -B \
      -Djava.level=$JAVA_LEVEL \
      $MVN_FLAG -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn

notifications:
  email: false
