language: java

cache:
  directories:
    - $HOME/.m2

jdk:
  - openjdk8
  - openjdk11

env:
  global:
    - JAVA_LEVEL=8
  matrix:
    - JENKINS_VERSION=2.60.3 AMC_FAIL_ON_ERROR=true
    - JENKINS_VERSION=2.164.1 AMC_FAIL_ON_ERROR=false

matrix:
  exclude:
    - jdk: openjdk11
      env: JENKINS_VERSION=2.60.3 AMC_FAIL_ON_ERROR=true

services:
  - docker

install:
  - mvn clean install -DskipTests=true -Dmaven.javadoc.skip=true -B -V

script:
  - |
    mvn clean install -B \
      -Djava.level=$JAVA_LEVEL \
      -Djenkins.version=$JENKINS_VERSION \
      -Daccess-modifier-checker.failOnError=$AMC_FAIL_ON_ERROR

notifications:
  email: false
