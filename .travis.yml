language: java

cache:
  directories:
    - $HOME/.m2

jdk:
  - openjdk8

env:
  global:
    - JAVA_LEVEL=8

matrix:
  include:
    - jdk: openjdk11
      env:
        - MAVEN_OPTS="-Djenkins.version=2.164.1 -Daccess-modifier-checker.failOnError=true"
    - jdk: openjdk8
      env:
        - MAVEN_OPTS="-Djenkins.version=2.164.1 -Daccess-modifier-checker.failOnError=true"

services:
  - docker

install:
  - mvn clean install -DskipTests=true -Dmaven.javadoc.skip=true -B -V $MAVEN_OPTS

script:
  - |
    mvn clean install -B \
      -Djava.level=$JAVA_LEVEL \
      $MAVEN_OPTS

notifications:
  email: false
